{% extends 'base.html' %}

{% block content %}
<h1>Food Log</h1>
    <form method="post">
    {% csrf_token %}
    {{ form.as_p }}  <!-- Formularz wyboru daty -->
    <input type="submit" name="submit_date" value="Wybierz datÄ™">
</form>

<!-- Formularz dodawania FoodItem -->
<form method="post">
    {% csrf_token %}
    {{ fooditem_form.as_p }}
    <input type="submit" name="submit_fooditem" value="Dodaj FoodItem">
</form>

<form method="post">
    {% csrf_token %}
    {{ meal_form.as_p }}
    <button type="submit" name="submit_meal">Dodaj Meal</button>
</form>


    <h2>Selected Date: {{ selected_date|date:"F j, Y" }}</h2>

    <h3>Total Macros:</h3>
    <ul>
        <li>Total Calories: {{ total_macros.log_total_kcal }}</li>
        <li>Total Carbohydrates: {{ total_macros.log_total_carbohydrates }}</li>
        <li>Total Fats: {{ total_macros.log_total_fats }}</li>
        <li>Total Proteins: {{ total_macros.log_total_proteins }}</li>
    </ul>

    <!-- Lista dodanych FoodItem -->
    {% if food_items %}
        <h2>Dodane FoodItem</h2>
        <ul>
            {% for food_item in food_items %}
                <li>{{ food_item.food_item.name }} - {{ food_item.quantity }} {{ food_item.food_item.unit }}</li>
            {% endfor %}
        </ul>
    {% endif %}

{% if error_message %}
    <div class="alert alert-danger">
        {{ error_message }}
    </div>
{% endif %}

{% endblock %}